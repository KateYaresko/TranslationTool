{% extends "layout_nav.html" %}

{% block head %}
	<title>Profile</title>
	<link href="/static/libs/bootstrap-3.3.2-dist/css/bootstrap-theme.min.css" rel="stylesheet">
	<link href="/static/libs/plugins-master/integration/jqueryui/dataTables.jqueryui.css" rel="stylesheet">
	<link href="/static/libs/plugins-master/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet">
	<link href="/static/css/core.css" type="text/css" rel="stylesheet">
	<link href="/static/css/navbar.css" type="text/css" rel="stylesheet">
	<link href="/static/css/profile.css" type="text/css" rel="stylesheet">
	<link href="/static/libs/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet">
	<link href="/static/libs/silviomoreto-bootstrap-select/dist/css/bootstrap-select.min.css" rel="stylesheet">
	<script src="/static/libs/jquery/2.1.3/jquery-2.1.3.min.js"></script>
	<script src="/static/js/profile.js"></script>
{% endblock %}

{% block content %}
	{% if change_psw == True %}
		{% set tabpanel_projects_class = "tab-pane fade" %}
	    {% set tabpanel_info_class = "tab-pane fade in active" %}
	    {% set nav_class_projects = "" %}
	    {% set nav_class_info = "active" %}
	{% else %}
		{% set tabpanel_projects_class = "tab-pane fade in active" %}
	    {% set tabpanel_info_class = "tab-pane fade" %}
	    {% set nav_class_projects = "active" %}
	    {% set nav_class_info = "" %}
	{% endif %}
	{% if change_psw_error == True %}	    
	    <script>
	        $(document).ready(function() {
		        showModal();
		    });
	    </script>
	{% endif %}
	
	<div role="tabpanel" class="tabpanel">
		<ul class="nav nav-tabs" role="tablist">
			<li role="presentation" class="{{ nav_class_projects }}"><a href="#projects" role="tab" data-toggle="tab">Projects</a></li>
			<li role="presentation" class="{{ nav_class_info }}"><a href="#info" role="tab" data-toggle="tab">Info</a></li>
		</ul>
		<div class="tab-content">
			<div role="tabpanel" class="{{ tabpanel_projects_class }}" id="projects">
				<div class="row">
					<table id="projects-table" class="table table-projects row-border display" cellspacing="0" width="100%">
						<thead>
							<tr>
								<th>Permission</th>
								<th>Name</th>
								<th>Languages</th>
								<th>Last Changes</th>
							</tr>
						</thead>
						<tfoot>
							<tr>
								<th>Permission</th>
								<th>Name</th>
								<th>Languages</th>
								<th>Last Changes</th>
							</tr>
						</tfoot>
						<tbody>
							<tr>
								<td>Creator</td>
								<td><a href="../228/project_properties">My Project</a></td>
								<td>
									<a href="/111/translate" class="list-group-item">
										<span><img src="/static/img/flags/ua.png"></span>
										<strong>Ukrainian&nbsp;</strong>(done)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;">
											100%
											</div>
										</div>
									</a>
								</td>
								<td>March 12, 2015</td>
							</tr>
							<tr>
								<td>Creator</td>
								<td><a href="../228/project_properties">My Project</a></td>
								<td>
									<a href="/111/translate" class="list-group-item clearfix">
										<span><img src="/static/img/flags/fr.png"></span>
										<strong>French&nbsp;</strong>(in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%;">
											20%
											</div>
										</div>
									</a>
								</td>
								<td>January 22, 2015</td>
							</tr>
							<tr>
								<td>Translator</td>
								<td><a href="../111/project_properties">Oriflame</a></td>
								<td>
									<a href="/111/translate" class="list-group-item">
										<span><img src="/static/img/flags/in.png"></span>
										<strong>Hindi&nbsp;</strong>(not in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
											0%
											</div>
										</div>
									</a>
								</td>
								<td>January 1, 2015</td>
							</tr>
							<tr>
								<td>Translator</td>
								<td><a href="../111/project_properties">Oriflame</a></td>
								<td>
									<a href="/111/translate" class="list-group-item clearfix">
										<span><img src="/static/img/flags/de.png"></span>
										<strong>German&nbsp;</strong>(in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
											5%
											</div>
										</div>
									</a>
								</td>
								<td>February 3, 2015</td>
							</tr>
							<tr>
								<td>Translator</td>
								<td><a href="../111/project_properties">Oriflame</a></td>
								<td>
									<a href="/111/translate" class="list-group-item clearfix">
										<span><img src="/static/img/flags/it.png"></span>
										<strong>Italian&nbsp;</strong>(in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="42" aria-valuemin="0" aria-valuemax="100" style="width: 42%;">
											42%
											</div>
										</div>
									</a>
								</td>
								<td>October 10, 2014</td>
							</tr>
							<tr>
								<td>Translator</td>
								<td><a href="../322/project_properties">D&amp;G</a></td>
								<td>
									<a href="/111/translate" class="list-group-item clearfix">
										<span><img src="/static/img/flags/es.png"></span>
											<strong>Spanish&nbsp;</strong>(in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100" style="width: 15%;">
											15%
											</div>
										</div>
									</a>
								</td>
								<td>January 1, 2015</td>
							</tr>
							<tr>
								<td>Translator</td>
								<td><a href="../322/project_properties">D&amp;G</a></td>
								<td>
									<a href="/111/translate" class="list-group-item clearfix">
										<span><img src="/static/img/flags/de.png"></span>
										<strong>German&nbsp;</strong>(in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
											5%
											</div>
										</div>
									</a>
								</td>
								<td>December 31, 2014</td>
							</tr>
							<tr>
								<td>Translator</td>
								<td><a href="../322/project_properties">D&amp;G</a></td>
								<td>
									<a href="/111/translate" class="list-group-item clearfix">
										<span><img src="/static/img/flags/pt.png"></span>
										<strong>Portuguese&nbsp;</strong>(in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="97" aria-valuemin="0" aria-valuemax="100" style="width: 97%;">
											97%
											</div>
										</div>
									</a>
								</td>
								<td>March 8, 2015</td>
							</tr>
							<tr>
								<td>Creator</td>
								<td><a href="../228/project_properties">My Other Project</a></td>
								<td>
									<a href="/111/translate" class="list-group-item">
										<span><img src="/static/img/flags/ua.png"></span>
										<strong>Ukrainian&nbsp;</strong>(done)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;">
											100%
											</div>
										</div>
									</a>
								</td>
								<td>March 12, 2015</td>
							</tr>
							<tr>
								<td>Creator</td>
								<td><a href="../228/project_properties">My Other Project</a></td>
								<td>
									<a href="/111/translate" class="list-group-item clearfix">
										<span><img src="/static/img/flags/fr.png"></span>
										<strong>French&nbsp;</strong>(in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%;">
											20%
											</div>
										</div>
									</a>
								</td>
								<td>January 22, 2015</td>
							</tr>
							<tr>
								<td>Translator</td>
								<td><a href="../111/project_properties">Rozetka</a></td>
								<td>
									<a href="/111/translate" class="list-group-item">
										<span><img src="/static/img/flags/in.png"></span>
										<strong>Hindi&nbsp;</strong>(not in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
											0%
											</div>
										</div>
									</a>
								</td>
								<td>January 1, 2015</td>
							</tr>
							<tr>
								<td>Translator</td>
								<td><a href="../111/project_properties">Rozetka</a></td>
								<td>
									<a href="/111/translate" class="list-group-item clearfix">
										<span><img src="/static/img/flags/de.png"></span>
										<strong>German&nbsp;</strong>(in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
											5%
											</div>
										</div>
									</a>
								</td>
								<td>February 3, 2015</td>
							</tr>
							<tr>
								<td>Translator</td>
								<td><a href="../111/project_properties">Rozetka</a></td>
								<td>
									<a href="/111/translate" class="list-group-item clearfix">
										<span><img src="/static/img/flags/it.png"></span>
										<strong>Italian&nbsp;</strong>(in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="42" aria-valuemin="0" aria-valuemax="100" style="width: 42%;">
											42%
											</div>
										</div>
									</a>
								</td>
								<td>October 10, 2014</td>
							</tr>
							<tr>
								<td>Translator</td>
								<td><a href="../322/project_properties">Samsung</a></td>
								<td>
									<a href="/111/translate" class="list-group-item clearfix">
										<span><img src="/static/img/flags/es.png"></span>
											<strong>Spanish&nbsp;</strong>(in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100" style="width: 15%;">
											15%
											</div>
										</div>
									</a>
								</td>
								<td>January 1, 2015</td>
							</tr>
							<tr>
								<td>Translator</td>
								<td><a href="../322/project_properties">Samsung</a></td>
								<td>
									<a href="/111/translate" class="list-group-item clearfix">
										<span><img src="/static/img/flags/de.png"></span>
										<strong>German&nbsp;</strong>(in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
											5%
											</div>
										</div>
									</a>
								</td>
								<td>December 31, 2014</td>
							</tr>
							<tr>
								<td>Translator</td>
								<td><a href="../322/project_properties">Samsung</a></td>
								<td>
									<a href="/111/translate" class="list-group-item clearfix">
										<span><img src="/static/img/flags/pt.png"></span>
										<strong>Portuguese&nbsp;</strong>(in progress)
										<div class="progress">
											<div class="progress-bar" role="progressbar" aria-valuenow="97" aria-valuemin="0" aria-valuemax="100" style="width: 97%;">
											97%
											</div>
										</div>
									</a>
								</td>
								<td>March 8, 2015</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<div role="tabpanel" class="{{ tabpanel_info_class }}" id="info">
				<div class="row">
					<table class="table table-striped" id = "change-profile">
						<tbody>
							<tr>
								<td><strong>First name</strong></td>
								<td>
									<a href="#" id="firstname-change" data-type="text" data-pk="{{ user.uid }}" data-url="{{ url_for('profile') }}" data-title="Enter firstname">{{ user.firstname }}</a>
									<i class="glyphicon glyphicon-pencil pencil-change"></i>
								</td>
							</tr>
							<tr>
								<td><strong>Last name</strong></td>
								<td>
									<a href="#" id="lastname-change" data-type="text" data-pk="{{ user.uid }}" data-url="{{ url_for('profile') }}" data-title="Enter lastname">{{ user.lastname }}</a>
									<i class="glyphicon glyphicon-pencil pencil-change"></i>
								</td>
							</tr>
							<tr>
								<td><strong>Email</strong></td>
								<td>
									<a href="#" id="email-change" data-type="text" data-pk="{{ user.uid }}" data-url="{{ url_for('profile') }}" data-title="Enter email">{{ user.email }}</a>
									<i class="glyphicon glyphicon-pencil pencil-change"></i>
								</td>
							</tr>
							<tr>
								<td colspan="2">
									<div class="text-center pull-right">
										<a href="#change-password-modal" data-toggle="modal" class="btn btn-primary">
											<i class="glyphicon glyphicon-lock"></i>
											&nbsp;Change password
										</a>
										<a href="#delete-account-modal" data-toggle="modal" class="btn btn-danger">
											<i class="glyphicon glyphicon-remove"></i>
											&nbsp;Delete account
										</a>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
	<div id="change-password-modal" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title text-center">Change Password</h4>
				</div>
				{% if form.old_passw.errors|length > 0 %}
				    {% set old_input_class = "input-group change-psw-input has-error" %}
				{% else %}
				    {% set old_input_class = "input-group change-psw-input" %}
				{% endif %}

				{% if form.new_passw.errors|length > 0 %}
				    {% set new_input_class = "input-group change-psw-input has-error" %}
				{% else %}
				    {% set new_input_class = "input-group change-psw-input" %}
				{% endif %}

				{% if form.retype_new_passw.errors|length > 0 %}
				    {% set retype_input_class = "input-group change-psw-input has-error" %}
				{% else %}
				    {% set retype_input_class = "input-group change-psw-input" %}
				{% endif %}
				<form action="{{ url_for('profile') }}" method="post" id="change-psw-form">
					{{ form.hidden_tag() }}
					<div class="modal-body">
						<div class="{{ old_input_class }}">
							<a class="input-group-addon"><span class="input-group glyphicon glyphicon-lock" aria-hidden="true"></span></a>
							<input type="password" class="form-control" placeholder="Current password" name="old_passw" autofocus="autofocus">
						</div>
						<div class="input-group has-error">
							{% for message in form.old_passw.errors %}
								<label class="control-label" for="inputError1">{{ message }}</label>
							{% endfor %}
						</div>
						<div class="{{ new_input_class }}">
							<a class="input-group-addon"><span class="input-group glyphicon glyphicon-lock" id="surname" aria-hidden="true"></span></a>
							<input type="password" class="form-control" placeholder="New password" name="new_passw">
						</div>
						<div class="input-group has-error">
							{% for message in form.new_passw.errors %}
								<label class="control-label" for="inputError1">{{ message }}</label>
							{% endfor %}
						</div>
						<div class="{{ retype_input_class }}">
							<a class="input-group-addon"><span class="input-group glyphicon glyphicon-lock" id="email" aria-hidden="true"></span></a>
							<input type="password" class="form-control" placeholder="Retype new password" name="retype_new_passw">
						</div>
						<div class="input-group has-error">
							{% for message in form.retype_new_passw.errors %}
								<label class="control-label" for="inputError1">{{ message }}</label>
							{% endfor %}
						</div>
					</div>
					<div class="modal-footer">
						<button type="submit" class="btn btn-primary popup-btn" name="change-passw-form">Save</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	<div id="delete-account-modal" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title text-center">Delete Account</h4>
				</div>
				<form action="{{ url_for('profile') }}" method="post">
					<div class="modal-body">
						<p>Are you shure you want to delete account?</p>
					</div>
					<div class="modal-footer">
						<button type="submit" class="btn btn-success popup-btn" name="delete-account-form">Yes</button>
						<button class="btn btn-danger popup-btn" data-dismiss="modal">No</button>
					</div>
				</form>
			</div>
		</div>
	</div>
{% endblock %}

{% block js %}
	<script src="/static/libs/DataTables-1.10.6/media/js/jquery.dataTables.min.js"></script>	
	<script src="/static/libs/plugins-master/integration/bootstrap/3/dataTables.bootstrap.js"></script>
	<script src="/static/libs/bootstrap3-editable/js/bootstrap-editable.min.js"></script>
	<script src="/static/libs/silviomoreto-bootstrap-select/dist/js/bootstrap-select.min.js"></script>
{% endblock %}
